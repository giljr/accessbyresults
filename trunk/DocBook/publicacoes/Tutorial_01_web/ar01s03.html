<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>3. Estruturando um Banco de Dados</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.74.0"><link rel="home" href="index.html" title="Access por Resultados - 1&ordm; Tutorial Boas vindas ao MS Access"><link rel="up" href="index.html" title="Access por Resultados - 1&ordm; Tutorial Boas vindas ao MS Access"><link rel="prev" href="ar01s02.html" title="2. Sistema de Gerenciamento de Bancos de Dados - SGBD"><link rel="next" href="ar01s04.html" title="4. Conclus&atilde;o"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Estruturando um Banco de Dados</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s02.html">Anterior</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ar01s04.html">Pr&oacute;ximo</a></td></tr></table><hr></div><div class="section" lang="pt"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e73"></a>3. Estruturando um Banco de Dados</h2></div></div></div>
    

    <p>Aqui est&atilde;o as etapas utilizadas no processo de
    estrutura&ccedil;&atilde;o de um banco de dados.</p>

    <p>Cada etapa ser&aacute; discutida em maiores detalhes nos trabalhos
    remanescentes dessa s&eacute;rie.</p>

    <div class="itemizedlist"><ul type="disc"><li>
        <p>Etapa 1 - <span class="emphasis"><em>determine o prop&oacute;sito do seu banco de
        dados</em></span> - isso ajuda a decidir quais dados ser&atilde;o
        armazenados pelo Ms Access.</p>
      </li><li>
        <p>Etapa 2 - <span class="emphasis"><em>determine as tabelas que voc&ecirc;
        precisa</em></span> - ap&oacute;s decidir o prop&oacute;sito, divida as
        informa&ccedil;&otilde;es em assuntos diferentes (contextos diversos); cada
        assunto ir&aacute; compor uma tabela do seu banco de dados.</p>
      </li><li>
        <p>Etapa 3 - <span class="emphasis"><em>determine os campos necess&aacute;rios</em></span> -
        cada categoria de informa&ccedil;&atilde;o &eacute; chamada de
        <span class="emphasis"><em>campo</em></span> e &eacute; mostrada como uma coluna independente
        na tabela.</p>
      </li><li>
        <p>Etapa 4 - <span class="emphasis"><em>determine os relacionamentos</em></span> -
        decida como os dados de uma tabela se relacionam com os dados de
        outras tabelas.</p>
      </li><li>
        <p>Etapa 5 - <span class="emphasis"><em>refine a estrutura do banco de
        dados</em></span> - verifique inicialmente se consegue obter os
        resultados desejados em suas tabelas. Caso necess&aacute;rio, reajuste a
        estrutura de seu banco de dados.</p>
      </li></ul></div>

    <div class="section" lang="pt"><div class="titlepage"><div><div><h3 class="title"><a name="d4e94"></a>3.1. Etapa 1 - Determine o prop&oacute;sito de seu banco de dados</h3></div></div></div>
      

      <p>O primeiro passo na cria&ccedil;&atilde;o de um banco de dados &eacute; a
      determina&ccedil;&atilde;o do objetivo do banco de dados e de como ser&aacute;
      utilizado. Isso indicar&aacute; o tipo de informa&ccedil;&atilde;o a ser obtida. A
      partir da&iacute;, pode-se determinar os assuntos (tabelas) a serem
      introduzidos no banco de dados e quais os dados (campos) a serem
      armazenados, para cada assunto.</p>

      <p>Nosso objetivo: Gerar o <span class="emphasis"><em>Termo de Leitura e C&oacute;pia de
      Dados Gravados em ECF</em></span>, conforme figura abaixo:</p>

      <div class="figure"><a name="d4e99"></a><p class="title"><b>Figura 1. Termo de Leitura e C&oacute;pia de Dados Gravados em ECF</b></p><div class="figure-contents">
        

        <div class="screenshot">
          

          <div class="mediaobject"><img src="images/Termo.png" alt="Termo de Leitura e C&oacute;pia de Dados Gravados em ECF"></div>
        </div>
      </div></div><br class="figure-break">
    </div>

    <div class="section" lang="pt"><div class="titlepage"><div><div><h3 class="title"><a name="d4e106"></a>3.2. Etapa 2 - Determine as tabelas que voce precisa</h3></div></div></div>
      

      <p>Consulte o formul&aacute;rio anterior.</p>

      <p>O pr&oacute;prio formul&aacute;rio nos d&aacute; dicas de tabelas candidatas; perceba
      as divis&otilde;es internas no formul&aacute;rio.</p>

      <p>Tr&ecirc;s se&ccedil;&otilde;es distintas se apresentam: <span class="emphasis"><em>Dados
      do Estabelecimento</em></span>, <span class="emphasis"><em>Dados da Ecf</em></span> e
      <span class="emphasis"><em>Autentica&ccedil;&atilde;o de Arquivos</em></span>.</p>

      <p>Tr&ecirc;s tabelas podemos ent&atilde;o formar:
      <span class="emphasis"><em>Contribuinte</em></span>, <span class="emphasis"><em>Ecf</em></span> e
      <span class="emphasis"><em>ArquivoAutenticado</em></span>.</p>

      <p>S&atilde;o assuntos (contextos) diferentes, merecedores de tabelas
      separadas.</p>
    </div>

    <div class="section" lang="pt"><div class="titlepage"><div><div><h3 class="title"><a name="d4e119"></a>3.3. Etapa 3 - Determine os campos necess&aacute;rios</h3></div></div></div>
      

      <p>Transcrevendo os dados do formul&aacute;rio, ter&iacute;amos os campos:
      <span class="guimenuitem">Raz&atilde;o Social</span>,
      <span class="guimenuitem">Inscri&ccedil;&atilde;o Estadual</span>,
      <span class="guimenuitem">Cnpj</span> e <span class="guimenuitem">Endere&ccedil;o</span>
      para tabela <span class="emphasis"><em>Contribuintes</em></span>;</p>

      <p>Os campos <span class="guimenuitem">Marca</span>,
      <span class="guimenuitem">Modelo</span>, <span class="guimenuitem">Vers&atilde;o Software
      B&aacute;sico</span> e <span class="guimenuitem">n&uacute;mero de
      Fabrica&ccedil;&atilde;o</span> para a tabela
      <span class="emphasis"><em>Ecf</em></span>;</p>

      <p>E finalmente, os campos <span class="guimenuitem">Nome do Arquivo
      Autenticado</span>, sua chave <span class="guimenuitem">MD5</span>
      e<span class="guimenuitem"> SHA1</span>, repetidos quatro vezes, para a tabela
      <span class="emphasis"><em>ArquivoAutenticado</em></span> (no m&aacute;ximo, por termo, s&oacute;
      podemos autenticar quatro arquivos).</p>
    </div>

    <div class="section" lang="pt"><div class="titlepage"><div><div><h3 class="title"><a name="d4e138"></a>3.4. Etapa 4 - Determine o relacionamento</h3></div></div></div>
      

      <p>O SGBD usa o relacionamento entre as tabelas para encontrar a
      informa&ccedil;&atilde;o solicitada.</p>

      <p>Voc&ecirc; define o relacionamento entre as tabelas.</p>

      <p>No nosso exemplo analisemos a rela&ccedil;&atilde;o entre as tabelas
      <span class="emphasis"><em>Contribuinte</em></span> X <span class="emphasis"><em>Ecf</em></span>:</p>

      <p>Cada Contribuinte possui nenhuma, uma ou v&aacute;rias Ecf
      (Rela&ccedil;&atilde;o zero ou <em class="glossterm">Rela&ccedil;&atilde;o
      um-para-v&aacute;rias</em>); Cada Ecf pertence, em determinado tempo, a
      apenas um Contribuinte (<em class="glossterm">Rela&ccedil;&atilde;o um-para-um</em>
      implementada pela inser&ccedil;&atilde;o do campo
      <span class="guimenuitem">CodigoContribuinte</span> na tabela
      <span class="emphasis"><em>Ecf</em></span>);</p>

      <p>Quanto &agrave; rela&ccedil;&atilde;o entre as tabelas
      <span class="emphasis"><em>Contribuinte</em></span> X
      <span class="emphasis"><em>ArquivoAutenticado</em></span> x <span class="emphasis"><em>Ecf</em></span>: cada
      arquivo autenticado refere-se apenas a um Contribuinte e a uma Ecf
      (implementa&ccedil;&atilde;o feita pela inser&ccedil;&atilde;o dos campos
      <span class="database"><span class="guimenuitem">CodigoContribuinte</span></span> e
      <span class="guimenuitem">CodigoEcf</span> na tabela
      <span class="emphasis"><em>ArquivoAutenticado</em></span>); por&eacute;m, cada Contribuinte e
      cada Ecf podem ter mais de um arquivo autenticado - as rela&ccedil;&otilde;es
      entre as tabelas <span class="guimenuitem">Contribuinte</span> X
      <span class="guimenuitem">ArquivoAutenticado</span> e<span class="guimenuitem">
      Ecf</span> X <span class="guimenuitem">ArquivoAutenticado</span>
      s&atilde;o do tipo <span class="emphasis"><em>um-para-v&aacute;rias</em></span>. Perceba os
      s&iacute;mbolos de infinito (<span class="symbol">&#8734;</span>) e o n&uacute;mero 1,
      identificando as rela&ccedil;&otilde;es: 1 (um) Contribuinte pode ter
      v&aacute;rios/infinitos (<span class="symbol">&#8734;</span>) ArquivoAutenticado(s); cada
      ArquivoAutenticado concerne a apenas 1 (uma) Ecf...</p>

      <p>Pronto, decidido as rela&ccedil;&otilde;es entre as tabelas, vamos
      concretiz&aacute;-las:</p>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Nota</h3>
          <div class="address"><p>No&nbsp;2&ordm;&nbsp;Tutorial&nbsp;da&nbsp;s&eacute;rie,&nbsp;&iacute;tem&nbsp;4,&nbsp;voc&ecirc;&nbsp;encontra&nbsp;maiores&nbsp;detalhes.</p></div>
        </div>

      <div class="figure"><a name="d4e169"></a><p class="title"><b>Figura 2. Relacionamento entre as tabelas</b></p><div class="figure-contents">
        

        <div class="screenshot">
          

          <div class="mediaobject"><img src="images/gre_00.jpg" alt="Relacionamento entre as tabelas"></div>
        </div>
      </div></div><br class="figure-break">
    </div>

    <div class="section" lang="pt"><div class="titlepage"><div><div><h3 class="title"><a name="d4e176"></a>3.5. Etapa 5 - Refine a estrutura do banco de dados</h3></div></div></div>
      

      <p>Nessa fase acrescemos alguns campos que achamos
      pertinentes.</p>

      <p>Para a tabela <span class="emphasis"><em>Contribuinte</em></span>, acrescemos
      <span class="guimenuitem">Munic&iacute;pio</span>, <span class="guimenuitem">Unidade da
      Federa&ccedil;&atilde;o</span> e <span class="guimenuitem">Cep</span>, por
      raz&otilde;es &oacute;bvias.</p>

      <p>Para a tabela <span class="emphasis"><em>Ecf</em></span>, acrescemos outros dados
      constantes do arquivo extra&iacute;do do Sitafe, quais sejam:
      <span class="guimenuitem">n&uacute;mero do Ato Cotepe</span>, n<span class="guimenuitem">&uacute;mero do
      Pedido de Uso/Cessa&ccedil;&atilde;o</span>, <span class="guimenuitem">n&uacute;mero gerado
      pelo Sitafe</span> (do PAT), <span class="guimenuitem">n&uacute;mero da vers&atilde;o
      atual</span> e o da <span class="guimenuitem">vers&atilde;o
      encontrada</span> pela fiscaliza&ccedil;&atilde;o, campos necess&aacute;rios
      para trabalhos futuros.</p>

      <p>O campo <span class="guimenuitem">Atualizado</span> registra
      automaticamente a data de cria&ccedil;&atilde;o do registro, para
      rastreabilidade; constitui-se em <span class="emphasis"><em>boa pr&aacute;tica na
      estrutura&ccedil;&atilde;o do banco de dados</em></span>, assunto que retornarei
      em breve.</p>

      <p>E finalmente a tabela <span class="emphasis"><em>ArquivoAutenticado</em></span> ,
      acrescemos os campos que a relaciona com as outras tabelas:
      <span class="guimenuitem">CodigoContribuinte</span> e
      <span class="database"><span class="guimenuitem">CodigoEcf</span></span> (ver figura
      2), definindo o banco de dados como relacional.</p>

      <p>Ent&atilde;o cada Arquivo Autenticado &eacute; marcado - &eacute; &uacute;nico -
      mediante a adi&ccedil;&atilde;o de dois campos - as chaves pr&iacute;m&aacute;rias das outras
      tabelas.</p>
    </div>
  </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s02.html">Anterior</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ar01s04.html">Pr&oacute;ximo</a></td></tr><tr><td width="40%" align="left" valign="top">2. Sistema de Gerenciamento de Bancos de Dados - SGBD&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">In&iacute;cio</a></td><td width="40%" align="right" valign="top">&nbsp;4. Conclus&atilde;o</td></tr></table></div></body></html>